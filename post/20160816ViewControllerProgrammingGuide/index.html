<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">



  
  
  <link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css">










<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.4.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.jpg?v=6.4.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.jpg?v=6.4.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.jpg?v=6.4.0">


  <link rel="mask-icon" href="/images/logo1.svg?v=6.4.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.4.0',
    sidebar: {"position":"left","width":300,"display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="版权声明：本文为博主原创，如需转载请注明出处。

官方文档地址
OverView 简介The Role of View Controllers - 视图控制器的作用视图控制器是应用程序的内部结构的基础。每个应用程序都至少有一个视图控制器，并且大多数的应用程序有几个。每个视图控制器管理应用程序用户界面的一部分以及接口和底层数据之间的交互。视图控制器也便于用户界面的不同部分之间的转换。
因为他们在你">
<meta property="og:type" content="article">
<meta property="og:title" content="【iOS】视图控制器编程指南View Controller Programming Guide for iOS">
<meta property="og:url" content="http://yoferzhang.com/post/20160816ViewControllerProgrammingGuide/index.html">
<meta property="og:site_name" content="YoferZhang 的博客">
<meta property="og:description" content="版权声明：本文为博主原创，如需转载请注明出处。

官方文档地址
OverView 简介The Role of View Controllers - 视图控制器的作用视图控制器是应用程序的内部结构的基础。每个应用程序都至少有一个视图控制器，并且大多数的应用程序有几个。每个视图控制器管理应用程序用户界面的一部分以及接口和底层数据之间的交互。视图控制器也便于用户界面的不同部分之间的转换。
因为他们在你">
<meta property="og:updated_time" content="2017-02-09T05:27:09.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="【iOS】视图控制器编程指南View Controller Programming Guide for iOS">
<meta name="twitter:description" content="版权声明：本文为博主原创，如需转载请注明出处。

官方文档地址
OverView 简介The Role of View Controllers - 视图控制器的作用视图控制器是应用程序的内部结构的基础。每个应用程序都至少有一个视图控制器，并且大多数的应用程序有几个。每个视图控制器管理应用程序用户界面的一部分以及接口和底层数据之间的交互。视图控制器也便于用户界面的不同部分之间的转换。
因为他们在你">



  <link rel="alternate" href="/atom.xml" title="YoferZhang 的博客" type="application/atom+xml" />




  <link rel="canonical" href="http://yoferzhang.com/post/20160816ViewControllerProgrammingGuide/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>【iOS】视图控制器编程指南View Controller Programming Guide for iOS | YoferZhang 的博客</title>
  




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83435219-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-83435219-1');
</script>



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?a6dda28cb6f26de955e11a3716d6ce9b";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">YoferZhang 的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">数学出身，功底扎实，热爱编程，虽然编程起步晚，但是冲劲十足。</p>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-索引-|-index">
    <a href="/index/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />索引 | Index</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-关于-|-about">
    <a href="/about" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br />关于 | About</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-归档-|-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档 | Archives</a>
  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoferzhang.com/post/20160816ViewControllerProgrammingGuide/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yofer Zhang">
      <meta itemprop="description" content="接下来自己能够坚持写博客，记录是一个好习惯">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YoferZhang 的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">【iOS】视图控制器编程指南View Controller Programming Guide for iOS
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-08-16 14:05:51" itemprop="dateCreated datePublished" datetime="2016-08-16T14:05:51+08:00">2016-08-16</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2017-02-09 13:27:09" itemprop="dateModified" datetime="2017-02-09T13:27:09+08:00">2017-02-09</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/post/20160816ViewControllerProgrammingGuide/#comments" itemprop="discussionUrl">
                
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="post/20160816ViewControllerProgrammingGuide/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p>版权声明：本文为博主原创，如需转载请注明出处。</p>
</blockquote>
<p><a href="https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/index.html#//apple_ref/doc/uid/TP40007457-CH2-SW1" target="_blank" rel="external">官方文档地址</a></p>
<h1 id="OverView-简介"><a href="#OverView-简介" class="headerlink" title="OverView 简介"></a>OverView 简介</h1><h2 id="The-Role-of-View-Controllers-视图控制器的作用"><a href="#The-Role-of-View-Controllers-视图控制器的作用" class="headerlink" title="The Role of View Controllers - 视图控制器的作用"></a>The Role of View Controllers - 视图控制器的作用</h2><p>视图控制器是应用程序的内部结构的基础。每个应用程序都至少有一个视图控制器，并且大多数的应用程序有几个。每个视图控制器管理应用程序用户界面的一部分以及接口和底层数据之间的交互。视图控制器也便于用户界面的不同部分之间的转换。</p>
<p>因为他们在你的应用程序中扮演着重要的角色，视图控制器几乎在你所做的一切的中心。<a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/index.html#//apple_ref/occ/cl/UIViewController" target="_blank" rel="external">UIViewController</a> 类定义的方法和属性来管理您的视图，处理事件，从一个视图控制器转换到另一个，并协调您的应用程序的其他部分。创建一个<code>UIViewController</code> 的子类并添加你需要实现你的应用程序行为的自定义代码。</p>
<a id="more"></a>
<p>有两种类型的视图控制器：</p>
<ul>
<li><code>Content</code> 视图控制器管理一些软件内容的离散部分，并且是你创建试图控制器的主要类型</li>
<li><code>Container</code> 视图控制器收集来自其他视图控制器信息（称为子视图控制器 ），并以便于导航或呈现不同视图控制器的内容的方式来呈现它。</li>
</ul>
<h3 id="View-Management-视图管理"><a href="#View-Management-视图管理" class="headerlink" title="View Management - 视图管理"></a>View Management - 视图管理</h3><p>视图控制器的最重要的作用是管理视图的层次。每个视图控制器有一个包含所有视图控制器的内容的单根视图。对于根视图，您可以添加你需要显示内容的 <code>views</code> 。如图1-1所示视图控制器和视图之间的内置关系。视图控制器总是有它的根视图的引用，每个视图都有其子视图强引用。</p>
<center>
![Figure 1-1Relationship between a view controller and its views](http://ww1.sinaimg.cn/mw690/a9c4d5f6gw1f6vkjxe3eij20qe0i774c.jpg)
</center>

<blockquote>
<p>Note: It is common practice to use outlets to access other views in your view controller’s view hierarchy. Because a view controller manages the content of all its views, outlets let you store references to the views that you need. The outlets themselves are connected to the actual view objects automatically when the views are loaded from the storyboard.</p>
</blockquote>
<p>一个内容视图控制器通过自身管理所有的视图。容器视图控制器管理自己的视图以及它的一个或多个子视图控制器的根视图。容器不能管理其子女的内容。它只能管理根视图，根据容器的设计调整大小和位置。图1-2说明了一个拆分视图控制器及其子女的关系。拆分视图控制器管理的总体尺寸和其子视图的位置，但是子视图控制器管理这些视图的实际内容。</p>
<center>
![Figure 1-2View controllers can manage content from other view controllers](http://ww2.sinaimg.cn/mw690/a9c4d5f6gw1f6vljhj6yvj20ts0u0t8x.jpg)
</center>

<p>有关管理视图控制器的视图的信息，请参阅 <a href="https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/DefiningYourSubclass.html#//apple_ref/doc/uid/TP40007457-CH7-SW6" target="_blank" rel="external">Managing View Layout.</a></p>
<h3 id="Data-Marshaling-数据编排"><a href="#Data-Marshaling-数据编排" class="headerlink" title="Data Marshaling - 数据编排"></a>Data Marshaling - 数据编排</h3><p>视图控制器作为其管理的视图和您的应用程序的数据之间的中介。<a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/index.html#//apple_ref/occ/cl/UIViewController" target="_blank" rel="external">UIViewController</a> 类的方法和属性，让你管理你的应用程序的视觉呈现。当你创建一个 <code>UIViewController</code> 的子类。您可以添加您需要在子类来管理您的数据的任何变量。添加自定义变量，创建像在图1-3的关系，在视图控制器将数据和用于提供该数据。 两者之间移动数据来回是你的责任。</p>
<center>
![图1-3视图控制器的数据对象和视图之间起中介作用](http://ww4.sinaimg.cn/mw690/a9c4d5f6gw1f6vm04ft6bj20i30bzt8y.jpg)
</center>


<p>你应该总是你的视图控制器和数据对象内维持职责完全分离。大多数用于确保数据结构的完整性的逻辑所属的数据对象本身。 视图控制器可以验证从输入的意见来，然后打包你的数据对象要求的格式该输入，但你应该尽量减少视图控制器在管理中的实际数据的作用。</p>
<p>一个 <a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIDocument_Class/index.html#//apple_ref/occ/cl/UIDocument" target="_blank" rel="external">UIDocument</a> 目的是从您的视图控制器分别管理自己的数据的一种方法。 文档对象是一个知道如何读取和写入数据，永久存储控制器对象。 当你继承，您可以添加任何逻辑和方法，你需要提取数据，并将其传递给视图控制器或您的应用程序的其他部分。 视图控制器可以存储接收，使其更容易地更新视图的任何数据的副本，但文件仍拥有真正的数据。</p>
<h3 id="User-Interactions-用户交互"><a href="#User-Interactions-用户交互" class="headerlink" title="User Interactions - 用户交互"></a>User Interactions - 用户交互</h3><p>视图控制器是响应者对象 ，并能够处理回落响应链事件。 虽然他们有能力这样做，视图控制器很少直接处理触摸事件。 相反，通常视图处理自己的触摸事件并把结果汇报到相关委托或目标对象的方法，它通常是视图控制器。 因此，在视图控制器大多数事件是使用委托方法或<a href="https://developer.apple.com/library/ios/documentation/General/Conceptual/Devpedia-CocoaApp/TargetAction.html#//apple_ref/doc/uid/TP40009071-CH3" target="_blank" rel="external"> action methods.</a> 。</p>
<p>有关在您的视图控制器实施行动方法的详细信息，请参阅<a href="https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/DefiningYourSubclass.html#//apple_ref/doc/uid/TP40007457-CH7-SW11" target="_blank" rel="external"> Handling User Interactions</a>. 有关处理其他类型的事件的信息，请参阅<a href="https://developer.apple.com/library/ios/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009541" target="_blank" rel="external"> Event Handling Guide for iOS</a></p>
<h3 id="Resource-Management-资源管理"><a href="#Resource-Management-资源管理" class="headerlink" title="Resource Management - 资源管理"></a>Resource Management - 资源管理</h3><p>视图控制器承担自己的视图，它创建的任何对象的所有责任。 在<a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/index.html#//apple_ref/occ/cl/UIViewController" target="_blank" rel="external">UIViewController</a>类自动处理视图管理的大多数方面。 例如，UIKit会自动释放那些不再需要的任何视图相关的资源。 在你 <code>UIViewController</code> 子类，你负责管理明确是你创建的任何对象。</p>
<p>当可用内存不足时，UIKit的应用要求释放他们不再需要任何资源。 它这样做的一种方法是通过调用您的视图控制器的方法 <a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/index.html#//apple_ref/occ/instm/UIViewController/didReceiveMemoryWarning" target="_blank" rel="external">didReceiveMemoryWarning</a>。 使用该方法来消除，你不再需要或以后就能很容易重新创建对象的引用。 例如，您可以使用该方法来删除缓存数据。 你可以当内存不足情况发生时释放尽可能多的内存是非常重要的。 消耗太多内存的应用可能会直接被系统终止，恢复内存。</p>
<h3 id="Adaptivity-适应性"><a href="#Adaptivity-适应性" class="headerlink" title="Adaptivity - 适应性"></a>Adaptivity - 适应性</h3><p>视图控制器负责的视图的展示，并适应该视图底层环境相匹配。 每一个iOS应用程序应该能够在iPad上，并在几个不同尺寸的iPhone上运行。 而不是为每个设备提供不同的视图控制器和视图层次，它更易于使用，能够适应其观点不断变化的空间需求的单一视图控制器。</p>
<p>在iOS系统中，视图控制器需要处理粗粒度的变化和细粒度的变化。 当一个视图控制器的 <code>traits</code> 发生改变粗粒度的变化发生。 性状是描述整体环境，诸如显示刻度属性。 最重要的特征之一是两个视图控制器的水平和垂直尺寸，这表明视图控制器在给定尺寸的空间有多大。 您可以使用尺寸级别的变化而改变视图的布局， 如图1-4所示 。 当水平尺寸类是<code>regular</code> ，视图控制器利用额外的水平空间来安排内容。 当水平尺寸级别紧凑 ，视图控制器垂直排列其内容。</p>
<center>
![图1-4适应视图大小变化级](http://ww2.sinaimg.cn/mw690/a9c4d5f6gw1f6vmodoektj20ov0gvmx7.jpg)
</center>

<p>在一个给定的大小类，有可能在任何时候发生更细粒度大小的变化。当用户旋转iPhone从纵向到横向，大小类可能不会改变，但屏幕尺寸通常改变。当你使用自动布局，UIKit自动调整视图的大小和位置来匹配新的维度。根据需要视图控制器可以做出更多的调整。</p>
<p>有关自适应的详细信息，请参阅<a href="https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/TheAdaptiveModel.html#//apple_ref/doc/uid/TP40007457-CH19-SW1" target="_blank" rel="external">The Adaptive Model.</a></p>
<h2 id="The-View-Controller-Hierarchy-视图控制器层次"><a href="#The-View-Controller-Hierarchy-视图控制器层次" class="headerlink" title="The View Controller Hierarchy - 视图控制器层次"></a>The View Controller Hierarchy - 视图控制器层次</h2><p>您的应用程序的视图控制器之间的关系定义每个视图控制器所需的行为。 UIKit的希望您能在规定的方式使用视图控制器。 保持适当的视图控制器的关系，确保自动行为传递到正确的视图控制器在需要的时候。 如果你违反了规定的遏制和演示的关系，你的应用程序的某些部分停止的行为预期。</p>
<h3 id="根视图控制器"><a href="#根视图控制器" class="headerlink" title="根视图控制器"></a>根视图控制器</h3><p>根视图控制器是视图控制器层次结构的锚。 每个窗口都只有其内容填充该窗口一个根视图控制器。 根视图控制器定义了用户看到的初始内容。 如图2-1所示根视图控制器和窗口之间的关系。 因为窗口有没有自己的可视内容，视图控制器的视图提供的所有内容。</p>
<center>
![](http://ww3.sinaimg.cn/mw690/a9c4d5f6gw1f6vmznbodyj20p40gb0ss.jpg)
</center>

<p>编程设置一个根视图是UITableView的app</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;UIKit/UIKit.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">HomePageViewController</span> : <span class="title">UITableViewController</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"HomePageViewController.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">HomePageViewController</span> ()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">HomePageViewController</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    <span class="comment">// Do any additional setup after loading the view.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)didReceiveMemoryWarning &#123;</span><br><span class="line">    [<span class="keyword">super</span> didReceiveMemoryWarning];</span><br><span class="line">    <span class="comment">// Dispose of any resources that can be recreated.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">AppDelegate</span> ()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">AppDelegate</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions &#123;</span><br><span class="line">    <span class="comment">// Override point for customization after application launch.</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">UITableViewController</span> *homePageController = [[HomePageViewController alloc] init];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">self</span>.window = [[<span class="built_in">UIWindow</span> alloc] initWithFrame:[[<span class="built_in">UIScreen</span> mainScreen] bounds]];</span><br><span class="line">    <span class="keyword">self</span>.window.rootViewController = homePageController;</span><br><span class="line">    </span><br><span class="line">    [<span class="keyword">self</span>.window makeKeyAndVisible];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h3 id="Container-View-Controllers-容器视图控制器"><a href="#Container-View-Controllers-容器视图控制器" class="headerlink" title="Container View Controllers - 容器视图控制器"></a>Container View Controllers - 容器视图控制器</h3><p>UIKit 有3个容器视图控制器UINavigationController, UISplitViewController, and UIPageViewController.</p>
<center>
![](http://ww1.sinaimg.cn/mw690/a9c4d5f6gw1f6vn7blcwdj20wd0podga.jpg)
</center>

<center>
![](http://ww3.sinaimg.cn/mw690/a9c4d5f6gw1f6vn9s627wj20qn0vpmxk.jpg)
</center>

<center>
![](http://ww2.sinaimg.cn/mw690/a9c4d5f6gw1f6vnd49ituj20u50v5t95.jpg)
</center>

<h2 id="Design-Tips-设计技巧"><a href="#Design-Tips-设计技巧" class="headerlink" title="Design Tips - 设计技巧"></a>Design Tips - 设计技巧</h2><h3 id="Use-System-Supplied-View-Controllers-Whenever-Possible-尽可能使用系统提供的视图控制器"><a href="#Use-System-Supplied-View-Controllers-Whenever-Possible-尽可能使用系统提供的视图控制器" class="headerlink" title="Use System-Supplied View Controllers Whenever Possible - 尽可能使用系统提供的视图控制器"></a>Use System-Supplied View Controllers Whenever Possible - 尽可能使用系统提供的视图控制器</h3><p>UIImagePickerController UIKit中类显示捕获的图片和视频，并访问用户的相机胶卷的标准接口。</p>
<p>你创建自己的自定义视图控制器之前，看一下现有的框架，看是否有视图控制器已经存在，您要执行的任务。</p>
<ul>
<li>UIKit框架提供的视图控制器显示警报，拍照和视频，以及在iCloud上管理文件。UIKit中还定义了你可以用它来组织你的内容许多标准容器视图控制器。</li>
<li>该框架的GameKit提供的视图控制器匹配的玩家和管理排行榜，成就和其他游戏功能。</li>
<li>地址簿UI框架提供的视图控制器用于显示和采摘的联系信息。</li>
<li>在MediaPlayer框架提供视图控制器用于播放和管理视频，以及用于从用户的库中选择媒体资产。</li>
<li>该EventKit UI框架提供的视图控制器用于显示和编辑用户的日历数据。</li>
<li>该GLKit框架提供用于管理OpenGL渲染表面的视图控制器。</li>
<li>该Multipeer连接框架提供的视图控制器用于检测其他用户，并邀请他们来连接。</li>
<li>消息UI框架提供的视图控制器用于撰写电子邮件和短信。</li>
<li>该PassKit框架提供的视图控制器显示通行证，并将它们添加到存折。</li>
<li>社交框架提供的视图控制器用于撰写消息的Twitter，Facebook和其他社交媒体网站。</li>
<li>该AVFoundation框架提供用于显示媒体资产视图控制器。</li>
</ul>
<blockquote>
<p>注意：切勿改装系统提供的视图控制器的视图层次结构。 每个视图控制器拥有自己的视图层次和负责维护该层次结构的完整性。 进行更改可能会引入错误到你的代码或防止所属视图控制器正确操作。 在系统视图控制器的情况下，始终依靠视图控制器的公开可用的方法和属性，使所有修改。</p>
</blockquote>
<h1 id="View-Controller-Definition"><a href="#View-Controller-Definition" class="headerlink" title="View Controller Definition"></a>View Controller Definition</h1><h2 id="Defining-Your-Subclass"><a href="#Defining-Your-Subclass" class="headerlink" title="Defining Your Subclass"></a>Defining Your Subclass</h2><ul>
<li>使用UITableViewController特别是当你的视图控制器的主视图是一个表。</li>
<li>使用UICollectionViewController特别是当你的视图控制器的主视图是一个集合视图。</li>
<li>使用UIViewController 对于所有其他视图控制器。</li>
</ul>
<h3 id="定义UI"><a href="#定义UI" class="headerlink" title="定义UI"></a>定义UI</h3><h3 id="用户界面触摸"><a href="#用户界面触摸" class="headerlink" title="用户界面触摸"></a>用户界面触摸</h3><p><a href="https://developer.apple.com/library/ios/documentation/General/Conceptual/Devpedia-CocoaApp/Outlet.html#//apple_ref/doc/uid/TP40009071-CH4" target="_blank" rel="external">outlets</a></p>
<h3 id="在运行时展示-view"><a href="#在运行时展示-view" class="headerlink" title="在运行时展示 view"></a>在运行时展示 view</h3><ol>
<li>Instantiates views using the information in your storyboard file.</li>
<li>Connects all outlets and actions.</li>
<li>Assigns the root view to the view controller’s view property.</li>
<li>Calls the view controller’s awakeFromNib method.When this method is called, the view controller’s trait collection is empty and views may not be in their final positions.</li>
<li>Calls the view controller’s viewDidLoad method.</li>
<li>Use this method to add or remove views, modify layout constraints, and load data for your views.</li>
</ol>
<h3 id="管理-view-布局"><a href="#管理-view-布局" class="headerlink" title="管理 view 布局"></a>管理 view 布局</h3><h3 id="高效管理内存"><a href="#高效管理内存" class="headerlink" title="高效管理内存"></a>高效管理内存</h3><blockquote>
<p>新博客文章地址：<a href=""></a><br>CSDN文章地址：<a href=""></a></p>
</blockquote>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
        <div class="post-widgets">
        

        

        
          
          <div class="social_share">
            
            
               <div id="needsharebutton-postbottom">
                 <span class="btn">
                    <i class="fa fa-share-alt" aria-hidden="true"></i>
                 </span>
               </div>
            
          </div>
        
        </div>
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/post/20160814UIBase/" rel="next" title="【iOS】UIButton,UIScrollView,UITableView常见属性,使用案例">
                <i class="fa fa-chevron-left"></i> 【iOS】UIButton,UIScrollView,UITableView常见属性,使用案例
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/post/20160816NotificationSum/" rel="prev" title="【iOS】Notification通知,通知中心,发布通知,通知代理对比">
                【iOS】Notification通知,通知中心,发布通知,通知代理对比 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="Yofer Zhang" />
            
              <p class="site-author-name" itemprop="name">Yofer Zhang</p>
              <p class="site-description motion-element" itemprop="description">接下来自己能够坚持写博客，记录是一个好习惯</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">102</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">7</span>
                    <span class="site-state-item-name">分类</span>
                  
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">96</span>
                    <span class="site-state-item-name">标签</span>
                  
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/yoferzhang" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:yoferzhang@gmail.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://plus.google.com/yoferzhang" target="_blank" title="Google"><i class="fa fa-fw fa-google"></i>Google</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://stackoverflow.com/yoferzhang" target="_blank" title="StackOverflow"><i class="fa fa-fw fa-stack-overflow"></i>StackOverflow</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://instagram.com/yoferzhang" target="_blank" title="Instagram"><i class="fa fa-fw fa-instagram"></i>Instagram</a>
                  
                </span>
              
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://ww3.sinaimg.cn/large/a9c4d5f6jw1f2cbilh1uyj2076076t97.jpg" title="WeChat" target="_blank">WeChat</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://cn.linkedin.com/in/耀琦-张-771388117" title="LinkedIn" target="_blank">LinkedIn</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#OverView-简介"><span class="nav-number">1.</span> <span class="nav-text">OverView 简介</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#The-Role-of-View-Controllers-视图控制器的作用"><span class="nav-number">1.1.</span> <span class="nav-text">The Role of View Controllers - 视图控制器的作用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#View-Management-视图管理"><span class="nav-number">1.1.1.</span> <span class="nav-text">View Management - 视图管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Data-Marshaling-数据编排"><span class="nav-number">1.1.2.</span> <span class="nav-text">Data Marshaling - 数据编排</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#User-Interactions-用户交互"><span class="nav-number">1.1.3.</span> <span class="nav-text">User Interactions - 用户交互</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Resource-Management-资源管理"><span class="nav-number">1.1.4.</span> <span class="nav-text">Resource Management - 资源管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Adaptivity-适应性"><span class="nav-number">1.1.5.</span> <span class="nav-text">Adaptivity - 适应性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#The-View-Controller-Hierarchy-视图控制器层次"><span class="nav-number">1.2.</span> <span class="nav-text">The View Controller Hierarchy - 视图控制器层次</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#根视图控制器"><span class="nav-number">1.2.1.</span> <span class="nav-text">根视图控制器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Container-View-Controllers-容器视图控制器"><span class="nav-number">1.2.2.</span> <span class="nav-text">Container View Controllers - 容器视图控制器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Design-Tips-设计技巧"><span class="nav-number">1.3.</span> <span class="nav-text">Design Tips - 设计技巧</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Use-System-Supplied-View-Controllers-Whenever-Possible-尽可能使用系统提供的视图控制器"><span class="nav-number">1.3.1.</span> <span class="nav-text">Use System-Supplied View Controllers Whenever Possible - 尽可能使用系统提供的视图控制器</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#View-Controller-Definition"><span class="nav-number">2.</span> <span class="nav-text">View Controller Definition</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Defining-Your-Subclass"><span class="nav-number">2.1.</span> <span class="nav-text">Defining Your Subclass</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#定义UI"><span class="nav-number">2.1.1.</span> <span class="nav-text">定义UI</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#用户界面触摸"><span class="nav-number">2.1.2.</span> <span class="nav-text">用户界面触摸</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#在运行时展示-view"><span class="nav-number">2.1.3.</span> <span class="nav-text">在运行时展示 view</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#管理-view-布局"><span class="nav-number">2.1.4.</span> <span class="nav-text">管理 view 布局</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#高效管理内存"><span class="nav-number">2.1.5.</span> <span class="nav-text">高效管理内存</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-yoferzhang"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yofer Zhang</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动 v3.2.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Pisces</a> v6.4.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.4.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.4.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.4.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.4.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.4.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.4.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.0"></script>



  

  
    <script id="dsq-count-scr" src="https://yoferzhang.disqus.com/count.js" async></script>
  

  
    <script type="text/javascript">
      var disqus_config = function () {
        this.page.url = 'http://yoferzhang.com/post/20160816ViewControllerProgrammingGuide/';
        this.page.identifier = 'post/20160816ViewControllerProgrammingGuide/';
        this.page.title = '【iOS】视图控制器编程指南View Controller Programming Guide for iOS';
        };
      function loadComments () {
        var d = document, s = d.createElement('script');
        s.src = 'https://yoferzhang.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      }
      
        loadComments();
      
    </script>
  












  





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  
  

  
    
      <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      },
      TeX: {equationNumbers: { autoNumber: "AMS" }}
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<script type="text/javascript" src="//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    
  


  
  
  
  <script src="/lib/needsharebutton/needsharebutton.js"></script>

  <script>
    
      pbOptions = {};
      
          pbOptions.iconStyle = "box";
      
          pbOptions.boxForm = "horizontal";
      
          pbOptions.position = "bottomCenter";
      
          pbOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
      
      new needShareButton('#needsharebutton-postbottom', pbOptions);
    
    
  </script>

  

  
  
  
  <script src="/lib/pangu/dist/pangu.min.js?v=3.3"></script>
  <script type="text/javascript">pangu.spacingPage();</script>


  

  

  

  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #333;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #eee;
      background-image: linear-gradient(#fcfcfc, #eee);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 8px;
    }

    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1
    }

    .highlight-wrap {
      position: relative;
    }
  </style>
  <script>
    $('.highlight').each(function (i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap')
      $(e).after($wrap)
      $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function (e) {
        var code = $(this).parent().find('.code').find('.line').map(function (i, e) {
          return $(e).text()
        }).toArray().join('\n')
        var ta = document.createElement('textarea')
        document.body.appendChild(ta)
        ta.style.position = 'absolute'
        ta.style.top = '0px'
        ta.style.left = '0px'
        ta.value = code
        ta.select()
        ta.focus()
        var result = document.execCommand('copy')
        document.body.removeChild(ta)
        
        $(this).blur()
      })).on('mouseleave', function (e) {
        var $b = $(this).find('.copy-btn')
        setTimeout(function () {
          $b.text('复制')
        }, 300)
      }).append(e)
    })
  </script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->


</body>
</html>
